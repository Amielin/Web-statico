#Ingreso

#REST 01 - v1/controladuanero/ingreso/manifiesto/manifiestos/obtenerdetalledoctransporte
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/obtenerdetalledoctransporte$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/obtenerdetalledoctransporte")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 02 - v1/controladuanero/ingreso/manifiesto/manifiestos/exportardoctransporteexcel

location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/exportardoctransporteexcel$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/exportardoctransporteexcel")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 03 - v1/controladuanero/ingreso/manifiesto/manifiestos/obtenerdeclaracionespordoctransporte
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/obtenerdeclaracionespordoctransporte$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/obtenerdeclaracionespordoctransporte")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 04 - v1/controladuanero/ingreso/manifiesto/manifiestos/obtenerdetalledeclaracion
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/obtenerdetalledeclaracion$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/obtenerdetalledeclaracion")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 05 - v1/controladuanero/ingreso/manifiesto/manifiestos/{numCorrelativo}/seriesdeclaracion
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/(\d{1,12})\/seriesdeclaracion$" {
    set $api_domain "controladuanero-simtra-aereo";
    set $numCorreDoc $1;
    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
	}
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/seriesdeclaracion/" .. ngx.var.numCorreDoc)
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 06 - v1/controladuanero/ingreso/manifiesto/manifiestos/exportarseriesdeclaracionexcel

location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/exportarseriesdeclaracionexcel$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/exportarseriesdeclaracionexcel")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 07 - v1/controladuanero/ingreso/manifiesto/documentostransporte/{numCorrelativo}/declaracionesaduaneras
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/documentostransporte\/(\d{1,12})\/declaracionesaduaneras$" {
    set $api_domain "controladuanero-simtra-aereo";
    set $numCorreDoc $1;
    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
	}
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/documentostransporte/declaracionesaduaneras/" .. ngx.var.numCorreDoc)
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 08 - v1/controladuanero/ingreso/manifiestos/{numCorrelativo}/documentostransporte
location ~ "^\/v1\/controladuanero\/ingreso\/manifiestos\/(\d{1,12})\/documentostransporte$" {
    set $api_domain "controladuanero-simtra-aereo";
    set $numCorreDoc $1;
    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
	}
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/documentostransporte/" .. ngx.var.numCorreDoc)
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 09 - v1/controladuanero/ingreso/manifiesto/manifiestos/obtenerDocTransporteporDeclaracion
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/obtenerDocTransporteporDeclaracion$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/obtenerDocTransporteporDeclaracion")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 10 - v1/controladuanero/ingreso/manifiesto/manifiestos/consultaraeronaves
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/consultaraeronaves$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/consultaraeronaves")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 11 - v1/controladuanero/ingreso/manifiesto/manifiestos/consultaraeronavespormanifiesto
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/consultaraeronavespormanifiesto$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/consultaraeronavespormanifiesto")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 12 - v1/controladuanero/ingreso/manifiesto/manifiestos/{numCorrelativo}
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/(\d{1,12})$" {
    set $api_domain "controladuanero-simtra-aereo";
    set $numCorreDoc $1;
    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
	}
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/" .. ngx.var.numCorreDoc)
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 13 - v1/controladuanero/ingreso/manifiesto/manifiestos/{numCorrelativo}/pasajeros
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/(\d{1,12})\/pasajeros$" {
    set $api_domain "controladuanero-simtra-aereo";
    set $numCorreDoc $1;
    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
	}
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/pasajeros/" .. ngx.var.numCorreDoc)
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

# REST 14 - v1/controladuanero/ingreso/manifiesto/manifiestos/obtenercantidadesdoctransporte
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/manifiestos\/obtenercantidadesdoctransporte$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/manifiestos/obtenercantidadesdoctransporte")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 15 - v1/controladuanero/ingreso/manifiesto/pasajerosaereos/consultarpasajerosaereospordoc
location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/pasajerosaereos\/consultarpasajerosaereospordoc$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/prevencion/consultarPasajerosAereosbyDoc")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#REST 16 - v1/controladuanero/ingreso/manifiesto/pasajerosaereos/consultarpasajerosaereospornombres

location ~ "^\/v1\/controladuanero\/ingreso\/manifiesto\/pasajerosaereos\/consultarpasajerosaereospornombres$" {
    set $api_domain "controladuanero-simtra-aereo";
    
    
     if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
   }
    add_header 'Access-Control-Allow-Origin' '*' always;
    
    proxy_set_header Host $sunatTiK8sHost;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-Host $host;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    set_by_lua_file $existAuid src/lua/validarAudienciaRequest.lua;



 if ($existAuid){
    rewrite_by_lua_block {
      ngx.req.clear_header("Authorization")
            ngx.req.set_uri("/v1/controladuanero/ingreso/manifiesto/e/prevencion/consultarPasajerosAereosbyNombres")
        }
            proxy_pass  http://upstreamK8sSunatti;
    }

    if ($existAuid = 0){
        content_by_lua_block {
             ngx.exit(ngx.HTTP_UNAUTHORIZED)
        }
    }
    
    proxy_http_version 1.1;

}

#Salida

#REST 01 - v1/controladuanero/salida/manifiesto/manifiestos/obtenerdetalledoctransporte

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/obtenerdetalledoctransporte$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/obtenerdetalledoctransporte")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 02 - v1/controladuanero/salida/manifiesto/manifiestos/exportardoctransporteexcel
location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/exportardoctransporteexcel$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/exportardoctransporteexcel")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}


#REST 03 - v1/controladuanero/salida/manifiesto/manifiestos/obtenerdeclaracionespordoctransporte
location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/obtenerdeclaracionespordoctransporte$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/obtenerdeclaracionespordoctransporte")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}


#REST 04 - v1/controladuanero/salida/manifiesto/manifiestos/obtenerdetalledeclaracion

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/obtenerdetalledeclaracion$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/obtenerdetalledeclaracion")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 05 - v1/controladuanero/salida/manifiesto/manifiestos/{numCorrelativo}/seriesdeclaracion

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/(\d{1,12})\/seriesdeclaracion$" {
	set $api_domain "controladuanero-simtra";
	set $numCorreDoc $1;
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/seriesdeclaracion/" ..  ngx.var.numCorreDoc)
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 06 - v1/controladuanero/salida/manifiesto/manifiestos/exportarseriesdeclaracionexcel

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/exportarseriesdeclaracionexcel$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/exportarseriesdeclaracionexcel")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 07 - v1/controladuanero/salida/manifiesto/documentostransporte/{numCorrelativo}/declaracionesaduaneras

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/documentostransporte\/(\d{1,12})\/declaracionesaduaneras$" {
	set $api_domain "controladuanero-simtra";
	set $numCorreDoc $1;
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/documentostransporte/declaracionesaduaneras/" ..  ngx.var.numCorreDoc)
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 08 - v1/controladuanero/salida/manifiesto/manifiestos/{numCorrelativo}/documentostransporte

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/(\d{1,12})\/documentostransporte$" {
	set $api_domain "controladuanero-simtra";
	set $numCorreDoc $1;
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/documentostransporte/" ..  ngx.var.numCorreDoc)
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 09 - v1/controladuanero/salida/manifiesto/manifiestos/obtenerDocTransporteporDeclaracion

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/obtenerDocTransporteporDeclaracion$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/obtenerDocTransporteporDeclaracion")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 10 - v1/controladuanero/salida/manifiesto/manifiestos/consultaraeronaves

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/consultaraeronaves$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/consultaraeronaves")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 11 - v1/controladuanero/salida/manifiesto/manifiestos/consultaraeronavespormanifiesto

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/consultaraeronavespormanifiesto$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/consultaraeronavespormanifiesto")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 12 - v1/controladuanero/salida/manifiesto/manifiestos/{numCorrelativo}

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/(\d{1,12})$" {
	set $api_domain "controladuanero-simtra";
	set $numCorreDoc $1;
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/" ..  ngx.var.numCorreDoc)
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 13 - v1/controladuanero/salida/manifiesto/manifiestos/{numCorrelativo}/pasajeros

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/(\d{1,12})\/pasajeros$" {
	set $api_domain "controladuanero-simtra";
	set $numCorreDoc $1;
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/pasajeros/" ..  ngx.var.numCorreDoc)
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 14 - v1/controladuanero/salida/manifiesto/manifiestos/obtenercantidadesdoctransporte

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/manifiestos\/obtenercantidadesdoctransporte$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/manifiestos/obtenercantidadesdoctransporte")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 15 - v1/controladuanero/salida/manifiesto/pasajerosaereos/consultarpasajerosaereospordoc

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/pasajerosaereos\/consultarpasajerosaereospordoc$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/prevencion/consultarPasajerosAereosbyDoc")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#REST 16 - v1/controladuanero/salida/manifiesto/pasajerosaereos/consultarpasajerosaereospornombres

location ~ "^\/v1\/controladuanero\/salida\/manifiesto\/pasajerosaereos\/consultarpasajerosaereospornombres$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/salida/manifiesto/e/prevencion/consultarPasajerosAereosbyNombres")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}

#CUS12
#REST 01 - v1/controladuanero/mediotransporte/manifiesto/traficosaereos/obtenerinformacionlap

location ~ "^\/v1\/controladuanero\/mediotransporte\/manifiesto\/traficosaereos\/obtenerinformacionlap$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/mediotransporte/manifiesto/t/traficosaereos/obtenerinformacionlap")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}
#REST 02 - v1/controladuanero/mediotransporte/manifiesto/traficosaereos

location ~ "^\/v1\/controladuanero\/mediotransporte\/manifiesto\/traficosaereos$" {
	set $api_domain "controladuanero-simtra-aereo";
	
	    
    if ($request_method = 'OPTIONS') {
		add_header 'Access-Control-Allow-Origin' '*';
		add_header 'Access-Control-Allow-Credentials' 'true';   
		add_header 'Access-Control-Allow-Headers' 'Content-Type, Authorization, X-Requested-With';
		add_header 'Access-Control-Allow-Methods' 'POST, HEAD, OPTIONS, GET, PUT, DELETE, PATCH';
		add_header 'Content-Length' '0';
		add_header 'Content-Type' 'text/plain';
		return 204;
    }
    add_header 'Access-Control-Allow-Origin' '*' always;
	
	proxy_set_header Host $sunatAduanasK8sHost;
	proxy_set_header X-Real-IP $remote_addr;
	proxy_set_header X-Forwarded-Host $host;
	proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
	proxy_set_header X-Forwarded-Proto $scheme;
	
	set_by_lua_file $existAuid src/lua/validationAuidLocationRuc.lua;
	
	if ($existAuid){
	    rewrite_by_lua_block {
			ngx.req.clear_header("Authorization")
			ngx.req.set_uri("/v1/controladuanero/mediotransporte/manifiesto/e/traficosaereos")
	    }	    
	    proxy_pass  http://upstreamK8sAduanas;	    
	} 

	if ($existAuid = 0){	    
	    content_by_lua_block {
        	ngx.exit(ngx.HTTP_UNAUTHORIZED)
     	}	    
	}
	
	proxy_http_version 1.1;
}













